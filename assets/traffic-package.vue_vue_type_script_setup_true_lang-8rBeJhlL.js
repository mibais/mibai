import{be as $,d as N,J as R,m as S,aa as V,av as j,aj as A,ai as F,bf as q,aB as E,at as H}from"./antd-_WrWzocG.js";import{c as I,b as J}from"./bought-C7x9vzDo.js";import{u as O,a as z}from"./index-DF3e-Oc6.js";import{d as K,f as s,c as L,w as Q,o as W,a5 as X,a3 as Z,k as a,ad as e,u as t,G as p,a8 as r,af as m,H as v,F as h}from"./vue-f4UZefmh.js";const aa=r("br",null,null,-1),sa=K({__name:"traffic-package",setup(ea){const o=s(10),u=s(!1),b=s(!0),g=s(!1),i=s(0),y=s(),k=O(),x=z(),B=L(()=>o.value*i.value);Q(B,_=>{g.value=_>x.userInfo.money});const G=s({100:"100GB",300:"300GB",500:{style:{color:"#f50"},label:"500GB"},700:"700GB",1e3:"1000GB"});async function w(){const{data:_}=await I();_&&(b.value=!1,i.value=_.unitPrice,y.value=N(_.nextRestTime).format("YYYY-MM-DD"))}async function C(){await J(o.value),u.value=!1,k.success("流量购买成功！")}return W(()=>{w()}),(_,n)=>{const c=R,M=S,P=V,T=j,d=A,f=F,D=q,U=E,Y=H;return X(),Z(h,null,[a(c,{type:"primary",disabled:t(b),onClick:n[0]||(n[0]=l=>u.value=!0)},{icon:e(()=>[a(t($))]),default:e(()=>[p(" 购买流量包 ")]),_:1},8,["disabled"]),a(Y,{open:t(u),"onUpdate:open":n[4]||(n[4]=l=>v(u)?u.value=l:null),title:"购买流量包",width:"680px"},{footer:e(()=>[a(M,null,{default:e(()=>[a(c,{style:{"margin-right":"8px"},onClick:n[1]||(n[1]=l=>u.value=!1)},{default:e(()=>[p("取消")]),_:1}),a(c,{type:"primary",disabled:t(g),onClick:C},{default:e(()=>[p("购买")]),_:1},8,["disabled"])]),_:1})]),default:e(()=>[r("div",null,[a(d,null,{default:e(()=>[a(f,null,{default:e(()=>[a(d,{span:24},{default:e(()=>[a(T,null,{default:e(()=>[r("blockquote",null,[p(" 购买的流量包与当前套餐绑定，并不计算到下一个周期。"),aa,p("你的下一个周期："),a(P,{color:"#108ee9"},{default:e(()=>[p(m(t(y)),1)]),_:1})])]),_:1})]),_:1})]),_:1}),a(f,{span:16},{default:e(()=>[a(D,{value:t(o),"onUpdate:value":n[2]||(n[2]=l=>v(o)?o.value=l:null),min:1,max:1e3,step:5,marks:t(G)},null,8,["value","marks"])]),_:1}),a(f,{offset:2,span:6},{default:e(()=>[a(U,{value:t(o),"onUpdate:value":n[3]||(n[3]=l=>v(o)?o.value=l:null),placeholder:"输入你要购买的流量","addon-after":"GB",min:1,max:1e3,step:5},null,8,["value"])]),_:1})]),_:1}),a(d,null,{default:e(()=>[r("ul",null,[r("li",null,"当前套餐单价："+m(t(i))+"元/GB",1),r("li",null,"流量总计价格："+m(t(B))+"元",1)])]),_:1})])]),_:1},8,["open"])],64)}}});export{sa as _};
