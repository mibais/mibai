import{L as m}from"./index-DKsbxz7Z.js";import{q as y}from"./index-D7ECyhMR.js";import{c1 as v,R as B,K as g,aR as x,ah as k}from"./antd-BiDZImxE.js";import{d as C,f as u,s as w,a5 as b,ac as L,ad as n,k as i,u as r,G as p,a8 as M}from"./vue-CP9fVXMC.js";const V=C({__name:"traffic-line",setup(R){const c=u(),d=w(),s=u(!0),l=u(!1);async function h(){var o;if(l.value)return;l.value=!0;const{data:a}=await y(),t=[];for(const e of a)t.push({hourly:e.hourly,type:"上传",value:e.u}),t.push({hourly:e.hourly,type:"下载",value:e.d}),t.push({hourly:e.hourly,type:"总量",value:e.traffic});d.value=new m(c.value,{data:t,padding:"auto",xField:"hourly",yField:"value",seriesField:"type",legend:{position:"right-top"},tooltip:{formatter:e=>({name:e.type,value:f(e.value)})},xAxis:{tickCount:14,title:{text:"小时(h)"}},yAxis:{label:{formatter:e=>f(e)}},smooth:!0}),s.value=!1,l.value=!1,(o=d.value)==null||o.render()}function f(a){if(a===0)return"0B";const t=1024,o=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],e=Math.floor(Math.log(a)/Math.log(t));return(a/t**e).toPrecision(3)+o[e]}return(a,t)=>{const o=g,e=x,_=k;return b(),L(_,null,{title:n(()=>[i(r(v)),p(" 近7日小时流量图 ")]),extra:n(()=>[i(o,{loading:r(l),disabled:!r(s),type:"primary",onClick:h},{icon:n(()=>[i(r(B))]),default:n(()=>[p(" 加载数据 ")]),_:1},8,["loading","disabled"])]),default:n(()=>[M("div",{ref_key:"lineContainer",ref:c},[i(e,{loading:r(s),title:"",paragraph:{rows:4}},null,8,["loading"])],512)]),_:1})}}});export{V as _};
