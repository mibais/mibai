import{l as P}from"./login-slot-BiE2SnRr.js";import{j as U,q as O,s as h}from"./index-DbuHkAAg.js";import{g as q}from"./tools-Dmq7n5iD.js";import{a4 as z,U as N,a5 as A,X as f,a6 as B,a7 as L,J as V,a0 as F,a1 as I,a2 as M,K as S,m as j,W as G}from"./antd-BiDZImxE.js";import{d as J,f as m,o as K,ac as g,ad as o,a5 as v,G as d,k as e,u as a,ag as Q}from"./vue-CP9fVXMC.js";import"./index.vue_vue_type_script_setup_true_lang-DPnFuiPM.js";import"./login-left-BnbAcdUE.js";import"./logo-CmUnSVuR.js";const Z=J({__name:"register",setup(R){const u=m(""),l=m(!1),w=U(),t=m({username:"",email:"",password:"",confirmPassword:"",inviteCode:""});async function y(){if(!l.value){l.value=!0;try{await h(t.value),w.success({message:"注册成功",description:"即将跳转前登陆页",duration:2,onClose(){window.location.href="/login"}})}finally{l.value=!1}}}async function x(){const r=q("code");if(r){t.value.inviteCode=r;const{data:n}=await O(r);u.value=n}}return K(()=>{x()}),(r,n)=>{const b=V,p=F,i=I,_=M,c=S,k=j,C=G;return v(),g(P,null,{title:o(()=>[d(" 开始注册 ")]),default:o(()=>[e(C,{layout:"horizontal","label-col":{style:{width:"80px"}},model:a(t),onFinish:y},{default:o(()=>[a(u)?(v(),g(b,{key:0,"mb-24px":"",message:`你正在由 ${a(u)} 推荐`,type:"success","show-icon":""},{icon:o(()=>[e(a(z))]),_:1},8,["message"])):Q("",!0),e(i,{label:"昵称",name:"username"},{default:o(()=>[e(p,{value:a(t).username,"onUpdate:value":n[0]||(n[0]=s=>a(t).username=s),placeholder:"你的昵称"},{prefix:o(()=>[e(a(N))]),_:1},8,["value"])]),_:1}),e(i,{label:"邮箱",name:"email",rules:[{required:!0,message:"请补全邮箱"}]},{default:o(()=>[e(p,{value:a(t).email,"onUpdate:value":n[1]||(n[1]=s=>a(t).email=s),placeholder:"输入邮箱"},{prefix:o(()=>[e(a(A))]),_:1},8,["value"])]),_:1}),e(i,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码"}]},{default:o(()=>[e(_,{value:a(t).password,"onUpdate:value":n[2]||(n[2]=s=>a(t).password=s),placeholder:"输入密码"},{prefix:o(()=>[e(a(f))]),_:1},8,["value"])]),_:1}),e(i,{label:"确认密码",name:"confirmPassword",rules:[{required:!0,message:"请再次输入密码"}]},{default:o(()=>[e(_,{value:a(t).confirmPassword,"onUpdate:value":n[3]||(n[3]=s=>a(t).confirmPassword=s),placeholder:"再次输入密码"},{prefix:o(()=>[e(a(f))]),_:1},8,["value"])]),_:1}),e(k,{"ml-5":"",size:"large",wrap:""},{default:o(()=>[e(c,{type:"primary","html-type":"submit",size:"large",loading:a(l)},{icon:o(()=>[e(a(B))]),default:o(()=>[d(" 立即注册 ")]),_:1},8,["loading"]),e(c,{type:"default",size:"large",href:"/login"},{icon:o(()=>[e(a(L))]),default:o(()=>[d(" 返回登陆 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}});export{Z as default};
