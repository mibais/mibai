import{_ as N}from"./coverEdit.vue_vue_type_script_setup_true_lang-BmBcy3Ov.js";import{b as $,c as B}from"./shop-D2fJGAEf.js";import{u as V}from"./index-Ct-BVKny.js";import{aP as A,S as D,m as O,aw as R,an as E,am as F}from"./antd-Ckg-4fVb.js";import{d as Q,f as i,r as T,o as G,a5 as m,a3 as H,k as s,ad as a,G as _,ac as g,u as l,ag as k,a8 as J,af as P,ak as U,H as j,F as q}from"./vue-CP9fVXMC.js";const K={style:{margin:"0"}},ae=Q({__name:"cover",setup(L){const c=i(!1),t=i(!1),C=i([{title:"#",dataIndex:"coverId",key:"coverId"},{title:"名称",dataIndex:"shopName",key:"shopName"},{title:"价格",dataIndex:"price",key:"price"},{title:"周期",dataIndex:"cycle",key:"cycle"},{title:"排序",dataIndex:"orderIndex",key:"orderIndex"},{title:"描述",dataIndex:"item",key:"item"},{title:"操作",dataIndex:"action",key:"action",width:200}]),f=i(),o=T({pageSize:10,current:1,total:0,pageSizeOptions:["10","20","30","40"],showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`${e}条记录`,onChange(e,n){o.pageSize=n,o.current=e,d()}});async function d(){if(!c.value){c.value=!0;try{const{data:e}=await $({size:o.pageSize,current:o.current});f.value=e.records,o.total=e.total,o.pageSize=e.size,o.current=e.current}finally{c.value=!1}}}async function x(e){await B(e),V().success("封页删除成功",2)}const u=i();function I(e){u.value=e.coverId,t.value=!0}function h(){u.value=void 0,t.value=!0}function w(e){t.value=!1,e&&d()}return G(()=>{d()}),(e,n)=>{const p=D,v=O,S=R,z=E,b=F;return m(),H(q,null,[s(v,{"mb-5":""},{default:a(()=>[s(p,{type:"primary",onClick:h},{default:a(()=>[_(" 添加 ")]),_:1})]),_:1}),s(z,{loading:l(c),columns:l(C),"data-source":l(f),pagination:l(o),scroll:{x:100},"expand-column-width":100},{bodyCell:a(({column:r,record:y})=>[r.dataIndex==="action"?(m(),g(v,{key:0},{default:a(()=>[s(p,{type:"primary",onClick:M=>I(y)},{default:a(()=>[_(" 编辑 ")]),_:2},1032,["onClick"]),s(S,{title:"确定要删除封页吗？",onConfirm:M=>x(y.id)},{icon:a(()=>[s(l(A))]),default:a(()=>[s(p,{type:"primary",danger:""},{default:a(()=>[_(" 删除 ")]),_:1})]),_:2},1032,["onConfirm"])]),_:2},1024)):k("",!0)]),expandedRowRender:a(({record:r})=>[J("p",K,P(r.item),1)]),_:1},8,["loading","columns","data-source","pagination"]),s(b,{open:l(t),"onUpdate:open":n[0]||(n[0]=r=>j(t)?t.value=r:null),closable:!1,"mask-closable":!1,onCancel:n[1]||(n[1]=r=>t.value=!1),onOk:n[2]||(n[2]=r=>t.value=!1)},{footer:a(()=>[]),default:a(()=>[l(t)?(m(),g(U(N),{key:0,"cover-id":l(u),onCloseModal:w},null,40,["cover-id"])):k("",!0)]),_:1},8,["open"])],64)}}});export{ae as _};
