import{_ as q,a as L,n as J}from"./index-E9vVtGBC.js";import{P as K,a as X}from"./index-B43Py1T0.js";import{a9 as Z,ap as ee,d as U,bh as C,aQ as te,bn as ae,ag as oe,bo as ne,aa as se,ab as le}from"./antd-ClWK_BPx.js";import{d as A,a5 as g,ac as V,ad as t,a8 as a,af as r,U as I,ai as ie,f as m,s as G,c as re,o as ce,j as de,k as e,aw as S,ax as R,u as s,a3 as B,F as T,G as i}from"./vue-DIvP5FMT.js";import{F as P}from"./field-CAmLbzi7.js";import F from"./trend-B2hRGBVi.js";import{p as ue}from"./bought-BbQUgbKi.js";import{s as fe,u as pe}from"./user-DNv9yCyX.js";import{b as _e}from"./tools-hfCJAH4V.js";const me={class:"chartCard"},ge={class:"chartTop"},ve={class:"metaWrap"},he={class:"meta"},ye={class:"title"},xe={class:"action"},be={class:"total"},we={class:"contentFixed"},De={class:"footer"},Ce=A({__name:"chart-card",props:{loading:{type:Boolean,default:!1},bordered:{type:Boolean,default:!1},title:{type:String,default:""},total:{type:Number},contentHeight:{type:Number}},setup(l){const k=l;return(c,M)=>{const p=Z;return g(),V(p,{bind:k,"body-style":{padding:"20px 24px 8px 24px"}},{default:t(()=>[a("div",me,[a("div",ge,[a("div",ve,[a("div",he,[a("span",ye,r(l.title),1),a("span",xe,[I(c.$slots,"action",{},void 0,!0)])]),a("div",be,[I(c.$slots,"total",{},void 0,!0)])])]),a("div",{class:"content",style:ie({height:`${l.contentHeight}px`||"auto"})},[a("div",we,[I(c.$slots,"default",{},void 0,!0)])],4),a("div",De,[I(c.$slots,"footer",{},void 0,!0)])])]),_:3},8,["bind"])}}}),$=q(Ce,[["__scopeId","data-v-54870cd0"]]),Ie=a("span",null,"尚未购买",-1),Se=a("span",null,"已到期",-1),Re={style:{whiteSpace:"nowrap",overflow:"hidden"}},$e={class:"trendText"},ke={class:"trendText"},Be={style:{whiteSpace:"nowrap",overflow:"hidden"}},Te={class:"trendText"},Ve=A({__name:"brief-card",props:{loading:{type:Boolean,default:!1},trafficInfo:{type:Object,default:()=>({pastTrafficGB:"",todayTrafficGB:"",daySameRate:"",nextRestDate:"",totalTrafficGB:"",weekSameRate:""})}},emits:["planInfo"],setup(l,{emit:k}){const c=l,M=k,p=L();function Y(o){return o.startsWith("-")?"down":"up"}const v=ee({scriptUrl:J(()=>import("./iconfont-B_hmDsvv.js"),__vite__mapDeps([]))}),h={xs:24,sm:12,md:12,lg:12,xl:6,style:{marginBottom:"24px"}},N=m(),O=m(),d=m({expireDate:"",leftDay:0,leftDayPercent:0,planName:""}),y=G(),x=G();async function W(){const{data:o}=await ue();d.value=o,d.value.expireDate=o!=null&&o.expireDate?U(o.expireDate).format("YYYY-MM-DD"):"",M("planInfo",d.value)}const j=re(()=>c.trafficInfo.nextRestDate?U(c.trafficInfo.nextRestDate).format("YYYY-MM-DD"):"无"),_=m([0,0]);async function z(){var u;const{data:o}=await fe();_.value=o,y.value=new X(N.value,{height:46,autoFit:!0,data:_.value}),(u=y.value)==null||u.render()}const b=m();async function E(){const{data:o}=await pe();b.value=o}return ce(()=>{var o;W(),z(),E(),x.value=new K(O.value,{height:46,autoFit:!0,percent:.78,barWidthRatio:.2,color:"#13C2C2"}),(o=x.value)==null||o.render()}),de(()=>{var o,u;(o=y.value)==null||o.destroy(),y.value=void 0,(u=x.value)==null||u.destroy(),x.value=void 0}),(o,u)=>{const w=oe,H=ne,D=se,Q=le;return g(),V(Q,{gutter:24},{default:t(()=>[e(D,S(R({...h})),{default:t(()=>[e($,{bordered:!1,title:"会员时长",loading:l.loading,"content-height":46},{action:t(()=>[e(w,{title:"会员过期时间"},{default:t(()=>[e(s(C))]),_:1})]),total:t(()=>{var n;return[["excess","paid"].includes(s(p).userInfo.status)?(g(),B(T,{key:0},[e(s(v),{type:"icon-31huiyuan"}),a("span",null,r(d.value.leftDay>0?`${d.value.leftDay}天`:"长期有效"),1)],64)):((n=s(p).userInfo)==null?void 0:n.status)==="normal"?(g(),B(T,{key:1},[e(s(te)),i(),Ie],64)):(g(),B(T,{key:2},[e(s(ae)),i(),Se],64))]}),footer:t(()=>[e(P,{label:"过期时间",value:`${d.value.expireDate}`},null,8,["value"])]),default:t(()=>{var n;return[e(H,{"stroke-color":{from:"#108ee9",to:"#87d068"},percent:d.value.leftDayPercent,status:((n=s(p).userInfo)==null?void 0:n.status)==="expire"?"exception":"normal"},null,8,["percent","status"])]}),_:1},8,["loading"])]),_:1},16),e(D,S(R({...h})),{default:t(()=>[e($,{bordered:!1,title:"流量信息",loading:l.loading,"content-height":46},{action:t(()=>[e(w,{title:"流量用尽后无法使用，也无法订阅"},{default:t(()=>[e(s(C))]),_:1})]),total:t(()=>{var n;return[e(s(v),{type:"icon-liuliang1"}),i(),a("span",null,r(s(_e)((n=l.trafficInfo)==null?void 0:n.leftTrafficGB)),1)]}),footer:t(()=>[e(P,{label:"流量重置日",value:s(j)},null,8,["value"])]),default:t(()=>[a("div",Re,[e(F,{flag:Y(l.trafficInfo.weekSameRate),style:{marginRight:"16px"}},{default:t(()=>[i(" 周同比 "),a("span",$e,r(l.trafficInfo.weekSameRate),1)]),_:1},8,["flag"]),e(F,{flag:Y(l.trafficInfo.daySameRate)},{default:t(()=>[i(" 日同比 "),a("span",ke,r(l.trafficInfo.daySameRate),1)]),_:1},8,["flag"])])]),_:1},8,["loading"])]),_:1},16),e(D,S(R({...h})),{default:t(()=>[e($,{bordered:!1,title:"订阅次数",loading:l.loading,"content-height":46},{action:t(()=>[e(w,{title:"你最近14日的订阅次数统计"},{default:t(()=>[e(s(C))]),_:1})]),total:t(()=>[e(s(v),{type:"icon-dingyue"}),i(),a("span",null,r(_.value.reduce((n,f)=>n+f)),1),i(" 次 ")]),footer:t(()=>[e(P,{label:"平均日订阅",value:(_.value.reduce((n,f)=>n+f)/_.value.length).toString()},null,8,["value"])]),default:t(()=>[a("div",{ref_key:"tinyColumnContainer",ref:N},null,512)]),_:1},8,["loading"])]),_:1},16),e(D,S(R({...h})),{default:t(()=>[e($,{bordered:!1,title:"钱包余额",loading:l.loading,"content-height":46},{action:t(()=>[e(w,{title:"钱包余额可购买套餐"},{default:t(()=>[e(s(C))]),_:1})]),total:t(()=>{var n;return[e(s(v),{type:"icon-qianbao"}),i(),a("span",null,r(`${(n=b.value)==null?void 0:n.money}元`),1)]}),footer:t(()=>{var n;return[a("div",Be,[e(F,{flag:(n=b.value)!=null&&n.whetherUp?"up":"down",style:{marginRight:"16px"}},{default:t(()=>{var f;return[i(" 月同比 "),a("span",Te,r((f=b.value)==null?void 0:f.rate),1)]}),_:1},8,["flag"])])]}),default:t(()=>[a("div",{ref_key:"progressContainer",ref:O},null,512)]),_:1},8,["loading"])]),_:1},16)]),_:1})}}});export{Ve as _};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
