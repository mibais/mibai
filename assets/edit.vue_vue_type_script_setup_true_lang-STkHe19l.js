import{v,w as A,u as G}from"./index-Bem8UvUJ.js";import{Z as I,$ as D,ah as V,S as q,w as z,aA as L,ai as T,Q as M,aT as $,I as j,l as E}from"./antd-C7ILtrJb.js";import{d as F,f as S,o as H,a5 as O,a3 as P,k as e,ad as t,u as l,G as o,a8 as Q,af as Z}from"./vue-BPQYEdcZ.js";function ee(d){return v("/admin/node/list",{current:d.current,size:d.size,...d.param},{customDev:!0})}function J(d){return v("/admin/node/view",{nodeId:d},{customDev:!0})}function te(d){return v("/admin/node/delete",{nodeId:d},{customDev:!0})}function K(d){return A("/admin/node/update",d,{customDev:!0})}const W={style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:1}},ae=F({__name:"edit",props:{nodeId:{type:Number,default:0}},emits:["handleClose"],setup(d,{emit:U}){const c=d,C=U,g=S(!0),a=S({id:void 0,server:"",trafficRate:0,type:0,status:"",sort:"",info:"",nodeClass:void 0,nodeGroup:0,nodeBandwidthLimit:void 0,bandwidthlimitResetday:0,nodeSpeedlimit:0});function b(f){C("handleClose",f)}async function k(){await K(a.value),G().success("修改成功"),b(1)}async function x(){const{data:f}=await J(c.nodeId);a.value=f,g.value=!1}return H(()=>{c.nodeId&&x()}),(f,n)=>{const r=I,s=D,i=V,p=q,w=z,m=L,_=T,B=M,N=$,y=j,R=E;return O(),P("div",null,[e(N,{spinning:l(g)},{default:t(()=>[e(B,{model:l(a),layout:"vertical"},{default:t(()=>[e(_,{gutter:16},{default:t(()=>[e(i,{span:8},{default:t(()=>[e(s,{label:"节点名",name:"name",rules:[{required:!0,message:"节点名不能为空"}]},{default:t(()=>[e(r,{value:l(a).name,"onUpdate:value":n[0]||(n[0]=u=>l(a).name=u)},null,8,["value"])]),_:1})]),_:1}),e(i,{span:8},{default:t(()=>[e(s,{label:"是否可见",name:"type",rules:[{required:!0,message:"请选择"}]},{default:t(()=>[e(w,{value:l(a).type,"onUpdate:value":n[1]||(n[1]=u=>l(a).type=u)},{default:t(()=>[e(p,{value:1},{default:t(()=>[o(" 显示 ")]),_:1}),e(p,{value:0},{default:t(()=>[o(" 隐藏 ")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(i,{span:8},{default:t(()=>[e(s,{label:"流量倍率",name:"trafficRate",rule:[{require:!0,message:"流量倍率不能为空"}]},{default:t(()=>[e(m,{value:l(a).trafficRate,"onUpdate:value":n[2]||(n[2]=u=>l(a).trafficRate=u),min:0},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:16},{default:t(()=>[e(i,{span:24},{default:t(()=>[e(s,{label:"节点地址",name:"server",rule:[{require:!0,message:"节点地址不能为空"}]},{default:t(()=>[e(r,{value:l(a).server,"onUpdate:value":n[3]||(n[3]=u=>l(a).server=u)},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:16},{default:t(()=>[e(i,{span:12},{default:t(()=>[e(s,{label:"状态",name:"status"},{default:t(()=>[e(r,{value:l(a).status,"onUpdate:value":n[4]||(n[4]=u=>l(a).status=u)},null,8,["value"])]),_:1})]),_:1}),e(i,{span:12},{default:t(()=>[e(s,{label:"节点限速(Mb)",name:"nodeSpeedlimit"},{default:t(()=>[e(m,{value:l(a).nodeSpeedlimit,"onUpdate:value":n[5]||(n[5]=u=>l(a).nodeSpeedlimit=u),min:0},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:16},{default:t(()=>[e(i,{span:12},{default:t(()=>[e(s,{label:"节点类型",name:"sort"},{default:t(()=>[e(w,{value:l(a).sort,"onUpdate:value":n[6]||(n[6]=u=>l(a).sort=u)},{default:t(()=>[e(p,{value:"0"},{default:t(()=>[o(" Shadowsocks ")]),_:1}),e(p,{value:"2"},{default:t(()=>[o(" SSH ")]),_:1}),e(p,{value:"5"},{default:t(()=>[o(" Anyconnect ")]),_:1}),e(p,{value:"9"},{default:t(()=>[o(" Shadowsocks 单端口多用户 ")]),_:1}),e(p,{value:"10"},{default:t(()=>[o(" Shadowsocks 中转 ")]),_:1}),e(p,{value:"11"},{default:t(()=>[o(" V2ray ")]),_:1}),e(p,{value:"12"},{default:t(()=>[o(" V2ray 中转 ")]),_:1}),e(p,{value:"14"},{default:t(()=>[o(" Trojan ")]),_:1}),e(p,{disabled:"",value:"999"},{default:t(()=>[o(" 系统保留 ")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(i,{span:12},{default:t(()=>[e(s,{label:"节点描述",name:"info"},{default:t(()=>[e(r,{value:l(a).info,"onUpdate:value":n[7]||(n[7]=u=>l(a).info=u)},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:16},{default:t(()=>[e(i,{span:12},{default:t(()=>[e(s,{label:"节点等级",name:"nodeClass"},{default:t(()=>[e(r,{value:l(a).nodeClass,"onUpdate:value":n[8]||(n[8]=u=>l(a).nodeClass=u)},null,8,["value"])]),_:1})]),_:1}),e(i,{span:12},{default:t(()=>[e(s,{label:"节点分组",name:"nodeGroup"},{default:t(()=>[e(m,{value:l(a).nodeGroup,"onUpdate:value":n[9]||(n[9]=u=>l(a).nodeGroup=u),"default-value":0},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:16},{default:t(()=>[e(i,{span:12},{default:t(()=>[e(s,{label:"节点流量上限(GB)",name:"nodeBandwidthLimit"},{default:t(()=>[e(r,{value:l(a).nodeBandwidthLimit,"onUpdate:value":n[10]||(n[10]=u=>l(a).nodeBandwidthLimit=u)},null,8,["value"])]),_:1})]),_:1}),e(i,{span:12},{default:t(()=>[e(s,{label:"节点流量清空日",name:"bandwidthlimitResetday"},{default:t(()=>[e(m,{value:l(a).bandwidthlimitResetday,"onUpdate:value":n[11]||(n[11]=u=>l(a).bandwidthlimitResetday=u),min:0},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"]),Q("div",W,[e(R,{size:"middle"},{default:t(()=>[e(y,{onClick:n[12]||(n[12]=u=>b(0))},{default:t(()=>[o(" 取消 ")]),_:1}),e(y,{type:"primary",onClick:k},{default:t(()=>[o(Z(d.nodeId?"保存":"添加"),1)]),_:1})]),_:1})])])}}});export{ae as _,te as d,ee as n};
