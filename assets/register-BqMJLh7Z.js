import{l as P}from"./login-slot-CJAKhm81.js";import{j as U,q as O,s as h}from"./index-BPRStEv9.js";import{g as q}from"./tools-Dku4Mfvn.js";import{a3 as z,U as N,a4 as V,W as f,a5 as A,a6 as B,I,$ as L,a0 as F,a1 as M,J as S,m as $,V as j}from"./antd-_WrWzocG.js";import{d as G,f as m,o as J,ac as g,ad as o,a5 as v,G as d,k as e,u as a,ag as Q}from"./vue-f4UZefmh.js";import"./index.vue_vue_type_style_index_0_lang-DYAf8QfS.js";import"./login-left-BZ7xKNiC.js";import"./logo-BiyglBXb.js";const Z=G({__name:"register",setup(R){const u=m(""),l=m(!1),w=U(),t=m({username:"",email:"",password:"",confirmPassword:"",inviteCode:""});async function y(){if(!l.value){l.value=!0;try{await h(t.value),w.success({message:"注册成功",description:"即将跳转前登陆页",duration:2,onClose(){window.location.href="/login"}})}finally{l.value=!1}}}async function x(){const r=q("code");if(r){t.value.inviteCode=r;const{data:n}=await O(r);u.value=n}}return J(()=>{x()}),(r,n)=>{const b=I,p=L,i=F,_=M,c=S,k=$,C=j;return v(),g(P,null,{title:o(()=>[d(" 开始注册 ")]),default:o(()=>[e(C,{layout:"horizontal","label-col":{style:{width:"80px"}},model:a(t),onFinish:y},{default:o(()=>[a(u)?(v(),g(b,{key:0,"mb-24px":"",message:`你正在由 ${a(u)} 推荐`,type:"success","show-icon":""},{icon:o(()=>[e(a(z))]),_:1},8,["message"])):Q("",!0),e(i,{label:"昵称",name:"username"},{default:o(()=>[e(p,{value:a(t).username,"onUpdate:value":n[0]||(n[0]=s=>a(t).username=s),placeholder:"你的昵称"},{prefix:o(()=>[e(a(N))]),_:1},8,["value"])]),_:1}),e(i,{label:"邮箱",name:"email",rules:[{required:!0,message:"请补全邮箱"}]},{default:o(()=>[e(p,{value:a(t).email,"onUpdate:value":n[1]||(n[1]=s=>a(t).email=s),placeholder:"输入邮箱"},{prefix:o(()=>[e(a(V))]),_:1},8,["value"])]),_:1}),e(i,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码"}]},{default:o(()=>[e(_,{value:a(t).password,"onUpdate:value":n[2]||(n[2]=s=>a(t).password=s),placeholder:"输入密码"},{prefix:o(()=>[e(a(f))]),_:1},8,["value"])]),_:1}),e(i,{label:"确认密码",name:"confirmPassword",rules:[{required:!0,message:"请再次输入密码"}]},{default:o(()=>[e(_,{value:a(t).confirmPassword,"onUpdate:value":n[3]||(n[3]=s=>a(t).confirmPassword=s),placeholder:"再次输入密码"},{prefix:o(()=>[e(a(f))]),_:1},8,["value"])]),_:1}),e(k,{"ml-5":"",size:"large",wrap:""},{default:o(()=>[e(c,{type:"primary","html-type":"submit",size:"large",loading:a(l)},{icon:o(()=>[e(a(A))]),default:o(()=>[d(" 立即注册 ")]),_:1},8,["loading"]),e(c,{type:"default",size:"large",href:"/login"},{icon:o(()=>[e(a(B))]),default:o(()=>[d(" 返回登陆 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}});export{Z as default};
