import{bb as Y,d as $,S as N,m as R,a0 as V,ao as A,ab as F,aa as j,bc as q,av as E,am as H}from"./antd-Do4zFXs5.js";import{c as I,b as O}from"./bought-Bd-8AuyF.js";import{u as z,a as J}from"./index-BlSSTGFT.js";import{d as K,f as s,c as L,w as Q,o as W,a5 as X,a3 as Z,k as a,ad as e,u as t,G as p,a8 as r,af as f,H as v,F as h}from"./vue-CP9fVXMC.js";const aa=r("br",null,null,-1),sa=K({__name:"traffic-package",setup(ea){const o=s(10),u=s(!1),b=s(!0),g=s(!1),i=s(0),y=s(),k=z(),x=J(),B=L(()=>o.value*i.value);Q(B,_=>{g.value=_>x.userInfo.money});const G=s({100:"100GB",300:"300GB",500:{style:{color:"#f50"},label:"500GB"},700:"700GB",1e3:"1000GB"});async function w(){const{data:_}=await I();_&&(b.value=!1,i.value=_.unitPrice,y.value=$(_.nextRestTime).format("YYYY-MM-DD"))}async function C(){await O(o.value),u.value=!1,k.success("流量购买成功！")}return W(()=>{w()}),(_,n)=>{const c=N,M=R,P=V,T=A,m=F,d=j,D=q,S=E,U=H;return X(),Z(h,null,[a(c,{type:"primary",disabled:t(b),onClick:n[0]||(n[0]=l=>u.value=!0)},{icon:e(()=>[a(t(Y))]),default:e(()=>[p(" 购买流量包 ")]),_:1},8,["disabled"]),a(U,{open:t(u),"onUpdate:open":n[4]||(n[4]=l=>v(u)?u.value=l:null),title:"购买流量包",width:"680px"},{footer:e(()=>[a(M,null,{default:e(()=>[a(c,{style:{"margin-right":"8px"},onClick:n[1]||(n[1]=l=>u.value=!1)},{default:e(()=>[p("取消")]),_:1}),a(c,{type:"primary",disabled:t(g),onClick:C},{default:e(()=>[p("购买")]),_:1},8,["disabled"])]),_:1})]),default:e(()=>[r("div",null,[a(m,null,{default:e(()=>[a(d,null,{default:e(()=>[a(m,{span:24},{default:e(()=>[a(T,null,{default:e(()=>[r("blockquote",null,[p(" 购买的流量包与当前套餐绑定，并只在当前周期有效。"),aa,p("当前周期到期时间："),a(P,{color:"#108ee9"},{default:e(()=>[p(f(t(y)),1)]),_:1})])]),_:1})]),_:1})]),_:1}),a(d,{span:16},{default:e(()=>[a(D,{value:t(o),"onUpdate:value":n[2]||(n[2]=l=>v(o)?o.value=l:null),min:1,max:1e3,step:5,marks:t(G)},null,8,["value","marks"])]),_:1}),a(d,{offset:2,span:6},{default:e(()=>[a(S,{value:t(o),"onUpdate:value":n[3]||(n[3]=l=>v(o)?o.value=l:null),placeholder:"输入你要购买的流量","addon-after":"GB",min:1,max:1e3,step:5},null,8,["value"])]),_:1})]),_:1}),a(m,null,{default:e(()=>[r("ul",null,[r("li",null,"当前套餐单价："+f(t(i))+"元/GB",1),r("li",null,"流量总计价格："+f(t(B))+"元",1)])]),_:1})])]),_:1},8,["open"])],64)}}});export{sa as _};
