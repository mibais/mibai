import{W as q,d as G,K as O,N as $,aa as F,ab as P,av as R,a_ as T,F as W,aR as j,S as H,m as K,O as J,am as L}from"./antd-BBX7OAHx.js";import{q as b,s as k,u as x}from"./index-AIwgzuM6.js";import{d as Q,f as _,o as X,a5 as Z,a3 as h,k as e,ad as a,u as l,a8 as ee,G as w,af as ae,H as ne}from"./vue-CP9fVXMC.js";function ie(u){return b("/admin/user/list",{current:u.current,size:u.size,...u.param},{customDev:!0})}function te(u){return b("/admin/user/view",{userId:u},{customDev:!0})}function pe(u){return b("/admin/user/delete",{userId:u},{customDev:!0})}function le(u){return k("/admin/user/update",u,{customDev:!0})}function se(u){return k("/admin/user/add",u,{customDev:!0})}const ue={style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:1}},me=Q({__name:"edit",props:{userId:{type:Number,default:0}},emits:["handleClose"],setup(u,{emit:C}){const U=u,E=C,v=_(!0),t=_({id:void 0,userName:"",email:"",transferEnable:0,port:void 0,money:0,grade:0,classExpire:void 0,group:0,nodeConnector:0});function c(r){E("handleClose",r)}async function D(){await le(t.value),x().success("修改成功"),c(1)}const g=_({email:"",pass:""}),p=_(!1);async function N(){const{data:r}=await se(t.value);x().success("用户添加成功🎉",3),g.value=r,p.value=!0}function I(){p.value=!1,c(1)}async function A(){const{data:r}=await te(U.userId);t.value=r,t.value.classExpire=G(t.value.classExpire),v.value=!1}return X(()=>{U.userId&&A(),v.value=!1}),(r,n)=>{const m=O,o=$,d=F,i=P,f=R,M=T,B=W,S=j,y=H,z=K,V=J,Y=L;return Z(),h("div",null,[e(S,{spinning:l(v)},{default:a(()=>[e(B,{model:l(t),layout:"vertical"},{default:a(()=>[e(i,{gutter:16},{default:a(()=>[e(d,{span:12},{default:a(()=>[e(o,{label:"用户名",name:"userName",rules:[{required:!0,message:"用户名不能为空"}]},{default:a(()=>[e(m,{value:l(t).userName,"onUpdate:value":n[0]||(n[0]=s=>l(t).userName=s)},null,8,["value"])]),_:1})]),_:1}),e(d,{span:12},{default:a(()=>[e(o,{label:"邮箱",name:"email",rules:[{required:!0,message:"邮箱不能为空"}]},{default:a(()=>[e(m,{value:l(t).email,"onUpdate:value":n[1]||(n[1]=s=>l(t).email=s)},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(i,{gutter:16},{default:a(()=>[e(d,{span:12},{default:a(()=>[e(o,{label:"总流量",name:"transferEnable"},{default:a(()=>[e(m,{value:l(t).transferEnable,"onUpdate:value":n[2]||(n[2]=s=>l(t).transferEnable=s),"addon-after":"GB",min:0},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(i,{gutter:16},{default:a(()=>[e(d,{span:12},{default:a(()=>[e(o,{label:"余额",name:"money"},{default:a(()=>[e(f,{value:l(t).money,"onUpdate:value":n[3]||(n[3]=s=>l(t).money=s),"addon-after":"元"},null,8,["value"])]),_:1})]),_:1}),e(d,{span:12},{default:a(()=>[e(o,{label:"账号过期",name:"expireIn"},{default:a(()=>[e(M,{value:l(t).classExpire,"onUpdate:value":n[4]||(n[4]=s=>l(t).classExpire=s),format:"YYYY-MM-DD"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(i,{gutter:16},{default:a(()=>[e(d,{span:12},{default:a(()=>[e(o,{label:"限速",name:"sort"},{default:a(()=>[e(f,{value:l(t).nodeSpeedlimit,"onUpdate:value":n[5]||(n[5]=s=>l(t).nodeSpeedlimit=s),"addon-after":"Mb"},null,8,["value"])]),_:1})]),_:1}),e(d,{span:12},{default:a(()=>[e(o,{label:"设备在线数",name:"nodeConnector"},{default:a(()=>[e(m,{value:l(t).nodeConnector,"onUpdate:value":n[6]||(n[6]=s=>l(t).nodeConnector=s),"addon-after":"台"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(i,{gutter:16},{default:a(()=>[e(d,{span:12},{default:a(()=>[e(o,{label:"用户等级",name:"grade"},{default:a(()=>[e(f,{value:l(t).grade,"onUpdate:value":n[7]||(n[7]=s=>l(t).grade=s),min:0},null,8,["value"])]),_:1})]),_:1}),e(d,{span:12},{default:a(()=>[e(o,{label:"用户分组",name:"group"},{default:a(()=>[e(f,{value:l(t).group,"onUpdate:value":n[8]||(n[8]=s=>l(t).group=s),"default-value":0},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"]),ee("div",ue,[e(z,{size:"middle"},{default:a(()=>[e(y,{onClick:n[9]||(n[9]=s=>c(0))},{default:a(()=>[w(" 取消 ")]),_:1}),e(y,{type:"primary",onClick:n[10]||(n[10]=s=>u.userId?D():N())},{default:a(()=>[w(ae(u.userId?"保存":"添加"),1)]),_:1})]),_:1}),e(Y,{open:l(p),"onUpdate:open":n[11]||(n[11]=s=>ne(p)?p.value=s:null),"mask-closable":!1,closable:!1,keyboard:!1,title:"新用户信息",onOk:I},{default:a(()=>[e(i,{"mt-5":"",gutter:16},{default:a(()=>[e(d,{offset:4,span:24},{default:a(()=>[e(o,{label:"邮箱"},{default:a(()=>[e(m,{readonly:"",value:l(g).email,style:{width:"calc(100% - 200px)"}},{prefix:a(()=>[e(l(q))]),_:1},8,["value"])]),_:1})]),_:1}),e(d,{offset:4,span:24},{default:a(()=>[e(o,{label:"密码"},{default:a(()=>[e(V,{readonly:"",value:l(g).pass,style:{width:"calc(100% - 200px)"}},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])])}}});export{me as _,pe as d,ie as u};
