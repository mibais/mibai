import{_ as Q}from"./index.vue_vue_type_script_setup_true_lang-2UVVrzlE.js";import{u as U}from"./index-CLUDcxIj.js";import{c2 as q,bj as H,c3 as K,G as R,d as W,av as X,I as Z,ai as tt,aj as et,c4 as nt,$ as at,w as ot,J as st,c0 as it,aU as lt,ah as ct,au as ut}from"./antd-_WrWzocG.js";import{v}from"./index-DCA2stvC.js";import{d as rt,f as c,r as _t,o as pt,a5 as m,ac as dt,ad as e,k as t,G as g,a8 as s,af as _,u as a,a3 as w,F as k,ag as C}from"./vue-f4UZefmh.js";import"./context-Be6rZNwT.js";function ft(S){return v("/user/invite/list",S,{customDev:!0})}function mt(){return v("/invite/link",null,{customDev:!0})}function gt(){return v("/invite/state",null,{customDev:!0})}function vt(){return v("/payback/setting",null,{customDev:!0})}const yt=s("span",{"text-20px":"","line-height-32px":"","mr-12px":"","mb-0":"",truncate:"","font-600":""},"我的推广",-1),xt=s("li",null,[s("i",null,"本页记录只保留最近 1 个月")],-1),ht={class:"flex flex-col items-center justify-center"},wt={class:"flex flex-col items-center justify-center"},kt={class:"flex flex-col items-center justify-center"},Ct=s("span",{style:{"font-size":"14px",color:"rgba(0, 0, 0, 0.45)"}}," 我的推广链接 ",-1),jt=rt({name:"Invite",__name:"index",setup(S){const{toClipboard:j}=U(),r=c(""),y=c(!1),p=c(),b=c(!0),x=c();async function B(){try{await j(r==null?void 0:r.value),y.value=!0,setTimeout(()=>{y.value=!1},1e3)}catch(n){console.log("复制失败: ",n)}}const i=_t({pageSize:10,current:1,total:0,pageSizeOptions:["10","20","30","40"],showSizeChanger:!0,showQuickJumper:!0,showTotal:n=>`${n}条记录`,onChange(n,D){i.pageSize=D,i.current=n,z()}}),d=c(!1),I=c([]);async function M(){const{data:n}=await mt();r.value=n}async function A(){const{data:n}=await gt();p.value=n,b.value=!1}async function O(){const{data:n}=await vt();x.value=n}const N=[{title:"推荐用户",dataIndex:"username",width:20},{title:"购买时间",dataIndex:"datetime",width:40},{title:"收入",dataIndex:"income",width:20}];async function z(){if(!d.value){d.value=!0;try{const{data:n}=await ft({size:i.pageSize,current:i.current});I.value=n.records??[],i.total=n.total,i.pageSize=n.size,i.current=n.current}catch(n){console.log(n)}finally{d.value=!1}}}return pt(()=>{z(),M(),A(),O()}),(n,D)=>{const V=X,Y=Z,l=tt,f=et,h=nt,G=at,P=ot,$=st,F=it,J=lt,T=ct,E=ut,L=Q;return m(),dt(L,null,{title:e(()=>[yt]),content:e(()=>[t(f,null,{default:e(()=>[t(l,{span:24},{default:e(()=>[t(Y,{message:"提示",type:"info"},{description:e(()=>[t(V,null,{default:e(()=>{var o,u;return[g(" 当你推荐了一位好友： "),s("ul",null,[s("li",null,"你的好友将获得 "+_((o=a(x))==null?void 0:o.friendMoney)+"元 的初始奖励",1),s("li",null,"你将获得友好 "+_((u=a(x))==null?void 0:u.selfPercent)+"% 的充值奖励",1),xt])]}),_:1})]),_:1})]),_:1})]),_:1}),t(f,{"mt-5":"",gutter:24},{default:e(()=>[t(l,{span:"24"},{default:e(()=>[t(T,null,{default:e(()=>[t(J,{spinning:a(b)},{default:e(()=>[t(f,{gutter:16},{default:e(()=>[t(l,{xs:24,sm:8},{default:e(()=>{var o;return[s("div",ht,[t(h,{title:"我的推荐人数",value:(o=a(p))==null?void 0:o.invitePsnCount,suffix:"人","value-style":{color:"#cf1322"},style:{"margin-right":"50px"}},{prefix:e(()=>[t(a(q))]),_:1},8,["value"])])]}),_:1}),t(l,{xs:24,sm:8},{default:e(()=>{var o;return[s("div",wt,[t(h,{title:"我的累计收益",value:(o=a(p))==null?void 0:o.totalMoney,suffix:"元","value-style":{color:"#3f8600"},style:{"margin-right":"50px"}},{prefix:e(()=>[t(a(H))]),_:1},8,["value"])])]}),_:1}),t(l,{xs:24,sm:8},{default:e(()=>{var o;return[s("div",kt,[t(h,{title:"我的平均收益",value:(o=a(p))==null?void 0:o.avgMoney,suffix:"元/人","value-style":{color:"#1677ff"},style:{"margin-right":"50px"}},{prefix:e(()=>[t(a(K))]),_:1},8,["value"])])]}),_:1}),t(l,{span:24,style:{marginTop:"40px"}},{default:e(()=>[s("div",{style:{"text-align":"center",width:"60%",margin:"0 auto"},onClick:B},[Ct,t(F,{style:{"margin-top":"10px"},size:"large",compact:""},{default:e(()=>[t(G,{disabled:!0,value:a(r),style:{width:"calc(100% - 200px)"}},null,8,["value"]),t(P,{open:a(y),title:"复制成功"},null,8,["open"]),t($,null,{icon:e(()=>[t(a(R))]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1},8,["spinning"])]),_:1})]),_:1})]),_:1}),t(f,{gutter:24,style:{marginTop:"24px"}},{default:e(()=>[t(l,{span:"24"},{default:e(()=>[t(T,{title:"推荐明细"},{default:e(()=>[t(E,{loading:a(d),columns:N,"data-source":a(I),pagination:a(i)},{bodyCell:e(({column:o,record:u})=>[o.dataIndex==="datetime"?(m(),w(k,{key:0},[g(_(a(W)(u.datetime).format("YYYY-MM-DD")),1)],64)):C("",!0),o.dataIndex==="username"?(m(),w(k,{key:1},[g(_(u.username??"已注销"),1)],64)):C("",!0),o.dataIndex==="income"?(m(),w(k,{key:2},[g(_(u.income)+" 元 ",1)],64)):C("",!0)]),_:1},8,["loading","data-source","pagination"])]),_:1})]),_:1})]),_:1})]),_:1})}}});export{jt as default};
