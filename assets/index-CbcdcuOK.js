import{_ as F}from"./index.vue_vue_type_script_setup_true_lang-C84BVVK1.js";import{d as V,K as Y,N as D,aa as M,ab as U,S as $,m as j,F as H,a9 as A,a0 as E,an as G}from"./antd-D9bc_wb_.js";import{c as J}from"./code-6DA-GZM4.js";import{d as K,f as i,r as O,o as Q,a5 as _,ac as x,ad as a,k as e,u as t,G as c,a3 as b,F as k,ag as S,af as q,a8 as L}from"./vue-CP9fVXMC.js";import"./index-BfS-IcDm.js";import"./context-oPRPwbiC.js";const P=L("span",{"text-20px":"","line-height-32px":"","mr-12px":"","mb-0":"",truncate:"","font-600":""},"购买记录管理",-1),na=K({__name:"index",setup(R){const d=i(!1),z=i([{title:"#",dataIndex:"id"},{title:"平台",dataIndex:"code"},{title:"金额",dataIndex:"number"},{title:"用户id",dataIndex:"userId"},{title:"发起日期",dataIndex:"datetime"},{title:"状态",dataIndex:"used"},{title:"交易号",dataIndex:"tradeNo"},{title:"平台交易号",dataIndex:"outTradeNo"}]),N=i(),o=O({pageSize:10,current:1,total:0,pageSizeOptions:["10","20","30","40"],showSizeChanger:!0,showQuickJumper:!0,showTotal:n=>`${n}条记录`,onChange(n,u){o.pageSize=u,o.current=n,p()}}),l=i({userName:"",tradeNo:"",outTradeNo:""});async function p(){if(!d.value){d.value=!0;try{const{data:n}=await J({size:o.pageSize,current:o.current,param:l.value});N.value=n.records,o.total=n.total,o.pageSize=n.size,o.current=n.current}finally{d.value=!1}}}return Q(()=>{p()}),(n,u)=>{const m=Y,f=D,r=M,g=U,C=$,w=j,T=H,v=A,y=E,h=G,B=F;return _(),x(B,null,{title:a(()=>[P]),default:a(()=>[e(v,{"mb-4":""},{default:a(()=>[e(T,{modal:t(l)},{default:a(()=>[e(g,{gutter:16},{default:a(()=>[e(r,{span:8},{default:a(()=>[e(f,{label:"用户名",name:"userName"},{default:a(()=>[e(m,{value:t(l).userName,"onUpdate:value":u[0]||(u[0]=s=>t(l).userName=s)},null,8,["value"])]),_:1})]),_:1}),e(r,{span:8},{default:a(()=>[e(f,{label:"交易单号",name:"tradeNo"},{default:a(()=>[e(m,{value:t(l).tradeNo,"onUpdate:value":u[1]||(u[1]=s=>t(l).tradeNo=s)},null,8,["value"])]),_:1})]),_:1}),e(r,{span:8},{default:a(()=>[e(f,{label:"平台交易单号",name:"outTradeNo"},{default:a(()=>[e(m,{value:t(l).outTradeNo,"onUpdate:value":u[2]||(u[2]=s=>t(l).outTradeNo=s)},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(g,{span:24,style:{"text-align":"right"}},{default:a(()=>[e(r,{span:24},{default:a(()=>[e(w,{flex:"","justify-end":"","w-full":""},{default:a(()=>[e(C,{loading:t(d),type:"primary",onClick:p},{default:a(()=>[c(" 查询 ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modal"])]),_:1}),e(g,{gutter:16},{default:a(()=>[e(r,{span:24},{default:a(()=>[e(v,{title:"充值记录"},{default:a(()=>[e(h,{loading:t(d),columns:t(z),"data-source":t(N),pagination:t(o),scroll:{x:100}},{bodyCell:a(({column:s,record:I})=>[s.dataIndex==="used"?(_(),b(k,{key:0},[I.used?(_(),x(y,{key:0,color:"green"},{default:a(()=>[c(" 已付款 ")]),_:1})):(_(),x(y,{key:1,color:"cyan"},{default:a(()=>[c(" 未付款 ")]),_:1}))],64)):S("",!0),s.dataIndex==="datetime"?(_(),b(k,{key:1},[c(q(t(V)(I.datetime).format("YYYY-MM-DD HH:mm")),1)],64)):S("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1})]),_:1})]),_:1})]),_:1})}}});export{na as default};
