import{_ as Q,a as Z,t as J}from"./index-DqT9Gqo1.js";import{P as X,a as ee}from"./index-CZzici7n.js";import{ah as te,aw as ae,d as O,bl as C,aS as oe,br as ne,w as se,bs as le,ai as ie,aj as re}from"./antd-_WrWzocG.js";import{U as j}from"./enum-KIDSNew-.js";import{d as A,a5 as h,ac as E,ad as t,a8 as a,af as c,U as D,ai as ce,f as g,s as z,c as ue,o as de,j as fe,k as e,aw as I,ax as R,u as s,a3 as k,F as M,G as i}from"./vue-f4UZefmh.js";import{F as P}from"./field-Cyb3QdmF.js";import Y from"./trend-DOtmOB9s.js";import{p as pe}from"./bought-C0zmcJaT.js";import{s as _e,u as me}from"./user-OVgfu-r1.js";const ge={class:"chartCard"},he={class:"chartTop"},ve={class:"metaWrap"},ye={class:"meta"},xe={class:"title"},we={class:"action"},Be={class:"total"},be={class:"contentFixed"},Se={class:"footer"},Ce=A({__name:"chart-card",props:{loading:{type:Boolean,default:!1},bordered:{type:Boolean,default:!1},title:{type:String,default:""},total:{type:Number},contentHeight:{type:Number}},setup(l){const T=l;return(u,F)=>{const _=te;return h(),E(_,{bind:T,"body-style":{padding:"20px 24px 8px 24px"}},{default:t(()=>[a("div",ge,[a("div",he,[a("div",ve,[a("div",ye,[a("span",xe,c(l.title),1),a("span",we,[D(u.$slots,"action",{},void 0,!0)])]),a("div",Be,[D(u.$slots,"total",{},void 0,!0)])])]),a("div",{class:"content",style:ce({height:`${l.contentHeight}px`||"auto"})},[a("div",be,[D(u.$slots,"default",{},void 0,!0)])],4),a("div",Se,[D(u.$slots,"footer",{},void 0,!0)])])]),_:3},8,["bind"])}}}),$=Q(Ce,[["__scopeId","data-v-54870cd0"]]),De=a("span",null,"尚未购买",-1),Ie=a("span",null,"已到期",-1),Re={style:{whiteSpace:"nowrap",overflow:"hidden"}},$e={class:"trendText"},Te={class:"trendText"},ke={style:{whiteSpace:"nowrap",overflow:"hidden"}},Me={class:"trendText"},Ae=A({__name:"brief-card",props:{loading:{type:Boolean,default:!1},trafficInfo:{type:Object,default:()=>({pastTrafficGB:"",todayTrafficGB:"",daySameRate:"",leftTrafficGB:"",nextRestDate:"",totalTrafficGB:"",weekSameRate:""})}},emits:["planInfo"],setup(l,{emit:T}){const u=l,F=T,_=Z();function U(o){return o.startsWith("-")?"down":"up"}const v=ae({scriptUrl:J(()=>import("./iconfont-BgumRDvY.js"),__vite__mapDeps([]))}),y={xs:24,sm:12,md:12,lg:12,xl:6,style:{marginBottom:"24px"}},G=g(),N=g(),d=g({expireDate:"",leftDay:0,leftDayPercent:0,planName:""}),x=z(),w=z();async function V(){const{data:o}=await pe();d.value=o,d.value.expireDate=o!=null&&o.expireDate?O(o.expireDate).format("YYYY-MM-DD"):"",F("planInfo",d.value)}const W=ue(()=>u.trafficInfo.nextRestDate?O(u.trafficInfo.nextRestDate).format("YYYY-MM-DD"):"无"),m=g([0,0]);async function H(){var r;const{data:o}=await _e();m.value=o,x.value=new ee(G.value,{height:46,autoFit:!0,data:m.value}),(r=x.value)==null||r.render()}function q(o){if(o===0)return"0B";const r=1024,f=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],b=Math.floor(Math.log(o)/Math.log(r));return(o/r**b).toPrecision(3)+f[b]}const B=g();async function K(){const{data:o}=await me();B.value=o}return de(()=>{var o;V(),H(),K(),w.value=new X(N.value,{height:46,autoFit:!0,percent:.78,barWidthRatio:.2,color:"#13C2C2"}),(o=w.value)==null||o.render()}),fe(()=>{var o,r;(o=x.value)==null||o.destroy(),x.value=void 0,(r=w.value)==null||r.destroy(),w.value=void 0}),(o,r)=>{const f=se,b=le,S=ie,L=re;return h(),E(L,{gutter:24},{default:t(()=>[e(S,I(R({...y})),{default:t(()=>[e($,{bordered:!1,title:"会员时长",loading:l.loading,"content-height":46},{action:t(()=>[e(f,{title:"会员过期时间"},{default:t(()=>[e(s(C))]),_:1})]),total:t(()=>{var n;return[["excess","paid"].includes(s(_).userInfo.status)?(h(),k(M,{key:0},[e(s(v),{type:"icon-31huiyuan"}),i(),a("span",null,c(`${d.value.leftDay}天`),1)],64)):((n=s(_).userInfo)==null?void 0:n.status)===s(j).normal?(h(),k(M,{key:1},[e(s(oe)),i(),De],64)):(h(),k(M,{key:2},[e(s(ne)),i(),Ie],64))]}),footer:t(()=>[e(P,{label:"过期时间",value:`${d.value.expireDate}`},null,8,["value"])]),default:t(()=>{var n;return[e(b,{"stroke-color":{from:"#108ee9",to:"#87d068"},percent:d.value.leftDayPercent,status:((n=s(_).userInfo)==null?void 0:n.status)===s(j).expire?"exception":"normal"},null,8,["percent","status"])]}),_:1},8,["loading"])]),_:1},16),e(S,I(R({...y})),{default:t(()=>[e($,{bordered:!1,title:"流量信息",loading:l.loading,"content-height":46},{action:t(()=>[e(f,{title:"流量用尽后无法使用，也无法订阅"},{default:t(()=>[e(s(C))]),_:1})]),total:t(()=>{var n;return[e(s(v),{type:"icon-liuliang1"}),i(),a("span",null,c(q((n=l.trafficInfo)==null?void 0:n.leftTrafficGB)),1)]}),footer:t(()=>[e(P,{label:"流量重置日",value:s(W)},null,8,["value"])]),default:t(()=>[a("div",Re,[e(Y,{flag:U(l.trafficInfo.weekSameRate),style:{marginRight:"16px"}},{default:t(()=>[i(" 周同比 "),a("span",$e,c(l.trafficInfo.weekSameRate),1)]),_:1},8,["flag"]),e(Y,{flag:U(l.trafficInfo.daySameRate)},{default:t(()=>[i(" 日同比 "),a("span",Te,c(l.trafficInfo.daySameRate),1)]),_:1},8,["flag"])])]),_:1},8,["loading"])]),_:1},16),e(S,I(R({...y})),{default:t(()=>[e($,{bordered:!1,title:"订阅次数",loading:l.loading,"content-height":46},{action:t(()=>[e(f,{title:"你最近14日的订阅次数统计"},{default:t(()=>[e(s(C))]),_:1})]),total:t(()=>[e(s(v),{type:"icon-dingyue"}),i(),a("span",null,c(m.value.reduce((n,p)=>n+p)),1),i(" 次 ")]),footer:t(()=>[e(P,{label:"平均日订阅",value:(m.value.reduce((n,p)=>n+p)/m.value.length).toString()},null,8,["value"])]),default:t(()=>[a("div",{ref_key:"tinyColumnContainer",ref:G},null,512)]),_:1},8,["loading"])]),_:1},16),e(S,I(R({...y})),{default:t(()=>[e($,{bordered:!1,title:"钱包余额",loading:l.loading,"content-height":46},{action:t(()=>[e(f,{title:"钱包余额可购买套餐"},{default:t(()=>[e(s(C))]),_:1})]),total:t(()=>{var n;return[e(s(v),{type:"icon-qianbao"}),i(),a("span",null,c(`${(n=B.value)==null?void 0:n.money}元`),1)]}),footer:t(()=>{var n;return[a("div",ke,[e(Y,{flag:(n=B.value)!=null&&n.whetherUp?"up":"down",style:{marginRight:"16px"}},{default:t(()=>{var p;return[i(" 月同比 "),a("span",Me,c((p=B.value)==null?void 0:p.rate),1)]}),_:1},8,["flag"])])]}),default:t(()=>[a("div",{ref_key:"progressContainer",ref:N},null,512)]),_:1},8,["loading"])]),_:1},16)]),_:1})}}});export{Ae as _};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
